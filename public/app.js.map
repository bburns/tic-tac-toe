{"version":3,"sources":["app/code/tic.js","app/components/App.jsx","app/initialize.js"],"names":[],"mappings":"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","file":"public\\app.js","sourcesContent":["\n// tictactoe\n// note: moves are given in row, col\n\nvar tic = {};\n\n\n// * constants\n\ntic.X=1;\ntic.O=-1;\n\n// game states\ntic.stateStart = 0; // wait for user to choose x or o\ntic.stateUser = 1; // user's turn\ntic.stateCpu = 2; // computer's turn\ntic.stateLastMove = 3; // show last move\ntic.stateEnd = 4; // show end dialog\n\ntic.statePlay = 9; // for playAgainstSelf()\n\nvar _=0;\ntic.boardEmpty =\n    [[_,_,_],\n     [_,_,_],\n     [_,_,_]];\n\n\n// * log\n\ntic.getSpaces = function(nspaces) {\n    var spaces = '';\n    while (nspaces > 0) {\n        spaces += '  ';\n        nspaces --;\n    }\n    return spaces;\n};\n\n\ntic.log = function(board, indent) {\n    var spaces = tic.getSpaces(indent);\n    var s = board.map(row=>spaces+row.join('')).join('\\n');\n    s = s.replace(/-1/g,'O');\n    s = s.replace(/1/g,'X');\n    s = s.replace(/0/g,'_');\n    s = s.replace(/2/g,'-');\n    s += '\\n';\n    var score = spaces + 'score ' + tic.getScore(board) + '\\n';\n    s = score + s;\n    console.log(s);\n};\n\n\n// * getScore\n\n// return score for a board - +1 for + win, -1 for - win\ntic.getScore = function(board) {\n    // there are 8 ways to win for each side - 3 horiz, 3 vert, 2 diagonal\n    var xwin = [1,1,1,1,1,1,1,1];\n    var ywin = [1,1,1,1,1,1,1,1];\n    for (var i=0; i<3; i++) {\n        for (var j=0; j<3; j++) {\n            // check columns\n            xwin[i] *= (board[i][j]===1);\n            ywin[i] *= (board[i][j]===-1);\n            // check rows\n            xwin[i+3] *= (board[j][i]===1);\n            ywin[i+3] *= (board[j][i]===-1);\n        }\n        // check diagonals\n        xwin[6] *= (board[i][i]===1);\n        ywin[6] *= (board[i][i]===-1);\n        xwin[7] *= (board[i][2-i]===1);\n        ywin[7] *= (board[i][2-i]===-1);\n    }\n    var xscore = xwin.reduce((a,b)=>a || b, 0);\n    var yscore = ywin.reduce((a,b)=>a || b, 0);\n    var score = xscore - yscore;\n    return score;\n};\n\n\n// * getMoves\n\n// get list of available moves\n// each move is an object with {i,j}\n// function getMoves(board) {\ntic.getMoves = function(board) {\n    var moves = [];\n    for (var i=0; i<3; i++) {\n        for (var j=0; j<3; j++) {\n            if (board[i][j]===0) {\n                var move = {i:i, j:j};\n                moves.push(move);\n            }\n        }\n    }\n    return moves;\n};\n\n\n// * getMove\n\n// get best move and score for given board and player\n// returns [move, score], with move={i,j}\n// this is the negamax algorithm\n// https://en.wikipedia.org/wiki/Negamax\ntic.getMove = function(board, player, lookahead) {\n\n    // check if we're at a terminal node - if so just return the score\n    var moves = tic.getMoves(board);\n    var score = tic.getScore(board);\n    if (lookahead==0 || score !==0 || moves.length==0) {\n        return [null, score];\n    }\n\n    // find the best move available for this player\n    var bestMove = null;\n    var bestScore = -Infinity;\n    for (var move of moves) {\n        board[move.i][move.j] = player; // place piece\n        var moveScore = tic.getMove(board, -player, lookahead - 1);\n        board[move.i][move.j] = 0; // remove piece\n        score = moveScore[1];\n        score = score * player; // flip sign if needed\n        if (score > bestScore) {\n            bestScore = score;\n            bestMove = move;\n        }\n    }\n    bestScore = bestScore * player; // flip sign back again\n    if (bestScore==0) bestScore=0; // -0 -> 0, for chai assert\n    return [bestMove, bestScore];\n};\n\n\n// * export\n\nmodule.exports = tic;\n\n\n","\nimport React from 'react';\nimport Modal from 'react-modal';\n\nimport tic from '../code/tic';\n\n\nexport default class App extends React.Component {\n\n    constructor() {\n        super();\n        var state = {};\n        state.playerUser = null;\n        state.playerCpu = null;\n        state.board = [[0,0,0],[0,0,0],[0,0,0]];\n        state.lookahead = 4;\n        state.showStart = true;\n        state.showEnd = false;\n        state.score = 0;\n        state.delayCpu = 250; // ms\n        state.delayLastMove = 1000; // ms\n        state.delayEnd = 2000; // ms\n        state.gameState = tic.stateStart;\n        this.state = state;\n    }\n\n    onStart() {\n        var state = {};\n        state.showStart = true;\n        state.showEnd = false;\n        state.gameState = tic.stateStart;\n        this.setState(state);\n    }\n\n    onChooseSide(evt) {\n        console.log(evt.target.innerHTML);\n        var side = evt.target.innerHTML;\n        var player = (side=='X') ? tic.X : tic.O;\n        var gameState = (side=='X') ? tic.stateUser : tic.stateCpu;\n        var board = [[0,0,0],[0,0,0],[0,0,0]];\n\n        var state = this.state;\n        state.playerUser = player;\n        state.playerCpu = - player;\n        state.showStart = false; // hide the dialog\n        state.gameState = gameState;\n        state.board = board;\n        this.setState(state);\n        this.forceUpdate();\n        if (gameState==tic.stateCpu) {\n            setTimeout(this.onCpuMove.bind(this), this.state.delayCpu);\n        }\n    }\n\n    onCpuMove() {\n        var moveScore = tic.getMove(this.state.board, this.state.playerCpu, this.state.lookahead);\n        var move = moveScore[0];\n        console.log(move);\n        var state = this.state;\n        state.board[move.i][move.j] = this.state.playerCpu;\n        tic.log(state.board);\n        this.setState(state);\n        this.forceUpdate();\n        if (this.checkBoard()) {\n        } else {\n            this.onLastMove();\n        }\n    }\n\n    onChooseSquare(i, j) {\n        var state = this.state;\n        if (state.board[i][j]===0) {\n            state.board[i][j] = this.state.playerUser;\n            this.setState(state);\n            tic.log(state.board);\n            this.forceUpdate();\n            if (this.checkBoard()) {\n                setTimeout(this.onCpuMove.bind(this), this.state.delayCpu);\n            } else {\n                // this.onDone();\n                this.onLastMove();\n            }\n        }\n    }\n\n    checkBoard() {\n        var moves = tic.getMoves(this.state.board);\n        var score = tic.getScore(this.state.board);\n        var cont = !(score!==0 || moves.length==0);\n        var state = this.state;\n        state.score = score;\n        this.setState(state);\n        return cont;\n    }\n\n    onLastMove() {\n        //. show line through win\n        var state = this.state;\n        state.gameState = tic.stateLastMove;\n        this.setState(state);\n        // delay n secs and goto end\n        setTimeout(this.onEnd.bind(this), this.state.delayLastMove);\n    }\n\n    onEnd() {\n        var state = this.state;\n        state.gameState = tic.stateEnd;\n        state.showEnd = true;\n        var s = \"\";\n        if (this.state.score==this.state.playerUser)\n            s = \"You won!!\";\n        else if (this.state.score==this.state.playerCpu)\n            s = \"You lost!!\";\n        else\n            s = \"Draw!\";\n        state.endMessage = s;\n        this.setState(state);\n        // delay n secs and goto start\n        setTimeout(this.onStart.bind(this), this.state.delayEnd);\n    }\n\n\n    render() {\n\n        var modalStyles = {\n        };\n\n        return (\n                <div id=\"content\">\n\n                <Modal\n            isOpen={this.state.showStart}\n            style={modalStyles}\n                >\n                <div>\n                <br />\n                <div>Choose a side</div><br />\n                <div>\n                <a href=\"#\" onClick={this.onChooseSide.bind(this)}>X</a>\n                &nbsp;\n                <a href=\"#\" onClick={this.onChooseSide.bind(this)}>O</a>\n                </div><br />\n                <div>(X goes first)</div><br />\n                </div>\n                </Modal>\n\n                <Modal\n            isOpen={this.state.showEnd}\n                >\n                <div className='end-message'>{this.state.endMessage}</div>\n                </Modal>\n\n                <Board\n            board={this.state.board}\n            onChooseSquare={this.onChooseSquare.bind(this)}\n                />\n\n                </div>\n        );\n    }\n}\n\n\nclass Board extends React.Component {\n\n    componentDidMount() {\n        this.updateCanvas();\n        window.addEventListener('resize', this.updateCanvas.bind(this));\n        const canvas = this.refs.canvas;\n        canvas.addEventListener('click', this.handleClick.bind(this));\n    }\n\n    handleClick(evt) {\n        const canvas = this.refs.canvas;\n        var x = evt.pageX - canvas.offsetLeft;\n        var y = evt.pageY - canvas.offsetTop;\n        const third = canvas.width / 3;\n        const j = (x<third) ? 0 : (x<third+third) ? 1 : 2;\n        const i = (y<third) ? 0 : (y<third+third) ? 1 : 2;\n        this.props.onChooseSquare(i, j);\n        this.updateCanvas();\n    }\n\n    componentWillUnmount() {\n        window.removeEventListener('resize', this.updateCanvas.bind(this));\n        const canvas = this.refs.canvas;\n        canvas.removeEventListener('click', this.handleClick.bind(this));\n    }\n\n    updateCanvas() {\n\n        const gridColor = \"gray\";\n\n        const w = window.innerWidth - 2;\n        const h = window.innerHeight - 2;\n        const wh = Math.min(w, h) * 0.8;\n        const third = wh/3;\n        const sixth = third/2;\n\n        const canvas = this.refs.canvas;\n\n        if (!canvas) return;\n\n        canvas.width = wh;\n        canvas.height = wh;\n\n        const ctx = this.refs.canvas.getContext('2d');\n        ctx.translate(0.5, 0.5); // so lines look better\n\n        // draw grid\n        ctx.beginPath();\n        ctx.lineWidth = 1; //. still too wide, as is 0.1\n        ctx.moveTo(0, third); ctx.lineTo(wh, third);\n        ctx.moveTo(0, third+third); ctx.lineTo(wh, third+third);\n        ctx.moveTo(third, 0); ctx.lineTo(third, wh);\n        ctx.moveTo(third+third, 0); ctx.lineTo(third+third, wh);\n        ctx.strokeStyle = gridColor;\n        ctx.stroke();\n\n        // get letter positions\n        const x = [];\n        const y = [];\n        const yoffset = sixth / 8;\n        x[0] = sixth;\n        y[0] = sixth + yoffset;\n        x[1] = third + sixth;\n        y[1] = third + sixth + yoffset;\n        x[2] = third + third + sixth;\n        y[2] = third + third + sixth + yoffset;\n\n        const fontSize = third;\n        ctx.font = fontSize + \"px serif\";\n        ctx.textAlign = \"center\";\n        ctx.textBaseline = \"middle\";\n\n        // draw board state\n        const board = this.props.board;\n        for (var i=0; i<3; i++) {\n            for (var j=0; j<3; j++) {\n                const piece = board[i][j];\n                if (piece!==0) {\n                    const letter = (piece==tic.X) ? 'X' : (piece==tic.O) ? 'O' : '-';\n                    ctx.fillText(letter, x[j], y[i]);\n                }\n            }\n        }\n    }\n\n    render() {\n        this.updateCanvas();\n        return (\n                <canvas id=\"canvas\" ref=\"canvas\" width='100%' height='100%'/>\n        );\n    }\n}\n\n\n","import ReactDOM from 'react-dom';\nimport React from 'react';\nimport App from 'components/App';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  ReactDOM.render(<App />, document.querySelector('#app'));\n});\n"]}